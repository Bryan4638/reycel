import{c as qe,e as y,j as e,f as Ve,m as Be,$ as ze,h as Fe,r as t,k as $e,l as te,o as De,n as ce,p as pe,q as Te,b as U,C as Oe,v as Ee,w as Me,a as d,x as Ze,y as Ge,z as Ue,A as He,F as Ke,B as Je,D as Xe,E as Ye,i as F,s as Re,G as xe,H as ge,I as Qe,u as ea,J as aa,t as de,K as ta}from"./index-CoKN0y7C.js";import{E as he,D as be,S as ra,d as Ce,a as ve,C as je,b as ye,m as we,P as sa,p as la,t as na,c as oa,e as ia,f as ca,g as da,h as ua}from"./Icons-Ir8WEg-7.js";import{u as fa}from"./useCategory-ziYxY3Sj.js";import{g as ma}from"./sedes-CG4m7rHf.js";import{t as pa}from"./chunk-ORPGD37S-mjngWJxm.js";import{c as Ne}from"./chunk-J7I6W5JF-YZ2tu-UP.js";import{u as Pe}from"./chunk-R6AK6OQ4-D6HQW98L.js";var Se=qe({slots:{base:"flex flex-grow flex-row w-full items-start py-3 px-4 gap-x-1",mainWrapper:"h-full flex-grow min-h-10 ms-2 flex flex-col box-border items-start text-inherit justify-center",title:"text-small w-full font-medium block text-inherit leading-5",description:"pl-[1px] text-small font-normal text-inherit",closeButton:"relative text-inherit translate-x-1 -translate-y-1",iconWrapper:"flex-none relative w-9 h-9 rounded-full grid place-items-center",alertIcon:"fill-current w-6 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},variants:{color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},variant:{solid:{},flat:{},faded:{base:"border-small"},bordered:{base:"border-small bg-transparent"}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"},full:{base:"rounded-full"}},hideIcon:{true:{iconWrapper:"hidden"}},hideIconWrapper:{true:{base:"gap-x-0",iconWrapper:"!bg-transparent !shadow-none !border-none"}},hasContent:{false:{base:"items-start",mainWrapper:"justify-center items-center"}}},defaultVariants:{color:"default",variant:"flat",radius:"md",hideIcon:!1,hideIconWrapper:!1},compoundVariants:[{variant:"solid",color:"default",class:{base:y.solid.default,closeButton:"data-[hover]:bg-default-100",alertIcon:"text-default-foreground"}},{variant:"solid",color:"primary",class:{base:y.solid.primary}},{variant:"solid",color:"secondary",class:{base:y.solid.secondary}},{variant:"solid",color:"success",class:{base:y.solid.success}},{variant:"solid",color:"warning",class:{base:y.solid.warning}},{variant:"solid",color:"danger",class:{base:y.solid.danger}},{variant:["flat","faded"],color:"default",class:{base:[y.flat.default,"bg-default-100 dark:bg-default-50/50","text-default-foreground"],description:"text-default-600",closeButton:"text-default-400",iconWrapper:"bg-default-50 dark:bg-default-100 border-default-200"}},{variant:["flat","faded"],color:"primary",class:{base:[y.flat.primary,"bg-primary-50 dark:bg-primary-50/50"],closeButton:"text-primary-500 data-[hover]:bg-primary-200",iconWrapper:"bg-primary-50 dark:bg-primary-100 border-primary-100"}},{variant:["flat","faded"],color:"secondary",class:{base:[y.flat.secondary,"bg-secondary-50 dark:bg-secondary-50/50"],closeButton:"text-secondary-500 data-[hover]:bg-secondary-200",iconWrapper:"bg-secondary-50 dark:bg-secondary-100 border-secondary-100"}},{variant:["flat","faded"],color:"success",class:{base:[y.flat.success,"bg-success-50 dark:bg-success-50/50"],closeButton:"text-success-500 data-[hover]:bg-success-200",iconWrapper:"bg-success-50 dark:bg-success-100 border-success-100"}},{variant:["flat","faded"],color:"warning",class:{base:[y.flat.warning,"bg-warning-50 dark:bg-warning-50/50"],closeButton:"text-warning-500 data-[hover]:bg-warning-200",iconWrapper:"bg-warning-50 dark:bg-warning-100 border-warning-100"}},{variant:["flat","faded"],color:"danger",class:{base:[y.flat.danger,"bg-danger-50 dark:bg-danger-50/50"],closeButton:"text-danger-500 data-[hover]:bg-danger-200",iconWrapper:"bg-danger-50 dark:bg-danger-100 border-danger-100"}},{variant:"faded",color:"default",class:{base:"border-default-300 dark:border-default-200"}},{variant:"faded",color:"primary",class:{base:"border-primary-200 dark:border-primary-100"}},{variant:"faded",color:"secondary",class:{base:"border-secondary-200"}},{variant:"faded",color:"success",class:{base:"border-success-300 dark:border-success-100"}},{variant:"faded",color:"warning",class:{base:"border-warning-300 dark:border-warning-100"}},{variant:"faded",color:"danger",class:{base:"border-danger-200 dark:border-danger-100"}},{variant:"bordered",color:"default",class:{base:[y.bordered.default],description:"text-default-600",closeButton:"text-default-400"}},{variant:"bordered",color:"primary",class:{base:[y.bordered.primary],closeButton:"data-[hover]:bg-primary-50"}},{variant:"bordered",color:"secondary",class:{base:[y.bordered.secondary],closeButton:"data-[hover]:bg-secondary-50"}},{variant:"bordered",color:"success",class:{base:[y.bordered.success],closeButton:"data-[hover]:bg-success-50"}},{variant:"bordered",color:"warning",class:{base:[y.bordered.warning],closeButton:"data-[hover]:bg-warning-100"}},{variant:"bordered",color:"danger",class:{base:[y.bordered.danger],closeButton:"data-[hover]:bg-danger-50"}},{variant:["flat","bordered","faded"],class:{iconWrapper:"shadow-small"}},{variant:["flat","faded"],class:{iconWrapper:"shadow-small border-1"}},{variant:"bordered",color:"default",class:{iconWrapper:"bg-default-200 dark:bg-default-100"}},{variant:"bordered",color:"primary",class:{iconWrapper:"bg-primary-100 dark:bg-primary-50"}},{variant:"bordered",color:"secondary",class:{iconWrapper:"bg-secondary-100 dark:bg-secondary-50"}},{variant:"bordered",color:"success",class:{iconWrapper:"bg-success-100 dark:bg-success-50"}},{variant:"bordered",color:"warning",class:{iconWrapper:"bg-warning-100 dark:bg-warning-50"}},{variant:"bordered",color:"danger",class:{iconWrapper:"bg-danger-100 dark:bg-danger-50"}}]}),xa=r=>e.jsx("svg",{className:"fill-current",fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...r,children:e.jsx("path",{clipRule:"evenodd",d:"M3 10.417C3 7.219 3 5.62 3.378 5.082C3.755 4.545 5.258 4.03 8.265 3.001L8.838 2.805C10.405 2.268 11.188 2 12 2C12.812 2 13.595 2.268 15.162 2.805L15.735 3.001C18.742 4.03 20.245 4.545 20.622 5.082C21 5.62 21 7.22 21 10.417V11.991C21 17.629 16.761 20.366 14.101 21.527C13.38 21.842 13.02 22 12 22C10.98 22 10.62 21.842 9.899 21.527C7.239 20.365 3 17.63 3 11.991V10.417ZM12 7.25C12.1989 7.25 12.3897 7.32902 12.5303 7.46967C12.671 7.61032 12.75 7.80109 12.75 8V12C12.75 12.1989 12.671 12.3897 12.5303 12.5303C12.3897 12.671 12.1989 12.75 12 12.75C11.8011 12.75 11.6103 12.671 11.4697 12.5303C11.329 12.3897 11.25 12.1989 11.25 12V8C11.25 7.80109 11.329 7.61032 11.4697 7.46967C11.6103 7.32902 11.8011 7.25 12 7.25ZM12 16C12.2652 16 12.5196 15.8946 12.7071 15.7071C12.8946 15.5196 13 15.2652 13 15C13 14.7348 12.8946 14.4804 12.7071 14.2929C12.5196 14.1054 12.2652 14 12 14C11.7348 14 11.4804 14.1054 11.2929 14.2929C11.1054 14.4804 11 14.7348 11 15C11 15.2652 11.1054 15.5196 11.2929 15.7071C11.4804 15.8946 11.7348 16 12 16Z",fill:"currentColor",fillRule:"evenodd"})}),ga=r=>e.jsx("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...r,children:e.jsx("path",{d:`
          M12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2Z
          M16.78 9.7L11.11 15.37C10.97 15.51 10.78 15.59 10.58 15.59C10.38 15.59 10.19 15.51 10.05 15.37L7.22 12.54
          C6.93 12.25 6.93 11.77 7.22 11.48C7.51 11.19 7.99 11.19 8.28 11.48L10.58 13.78L15.72 8.64
          C16.01 8.35 16.49 8.35 16.78 8.64C17.07 8.93 17.07 9.4 16.78 9.7Z
        `})}),Ie=r=>e.jsx("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",...r,children:e.jsx("path",{d:"M12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22ZM12.75 16C12.75 16.41 12.41 16.75 12 16.75C11.59 16.75 11.25 16.41 11.25 16L11.25 11C11.25 10.59 11.59 10.25 12 10.25C12.41 10.25 12.75 10.59 12.75 11L12.75 16ZM11.08 7.62C11.13 7.49 11.2 7.39 11.29 7.29C11.39 7.2 11.5 7.13 11.62 7.08C11.74 7.03 11.87 7 12 7C12.13 7 12.26 7.03 12.38 7.08C12.5 7.13 12.61 7.2 12.71 7.29C12.8 7.39 12.87 7.49 12.92 7.62C12.97 7.74 13 7.87 13 8C13 8.13 12.97 8.26 12.92 8.38C12.87 8.5 12.8 8.61 12.71 8.71C12.61 8.8 12.5 8.87 12.38 8.92C12.14 9.02 11.86 9.02 11.62 8.92C11.5 8.87 11.39 8.8 11.29 8.71C11.2 8.61 11.13 8.5 11.08 8.38C11.03 8.26 11 8.13 11 8C11 7.87 11.03 7.74 11.08 7.62Z"})}),ha=r=>e.jsx("svg",{className:"fill-current",fill:"none",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",...r,children:e.jsx("path",{d:"M17.51 3.85L11.57 0.42C10.6 -0.14 9.4 -0.14 8.42 0.42L2.49 3.85C1.52 4.41 0.919998 5.45 0.919998 6.58V13.42C0.919998 14.54 1.52 15.58 2.49 16.15L8.43 19.58C9.4 20.14 10.6 20.14 11.58 19.58L17.52 16.15C18.49 15.59 19.09 14.55 19.09 13.42V6.58C19.08 5.45 18.48 4.42 17.51 3.85ZM9.25 5.75C9.25 5.34 9.59 5 10 5C10.41 5 10.75 5.34 10.75 5.75V11C10.75 11.41 10.41 11.75 10 11.75C9.59 11.75 9.25 11.41 9.25 11V5.75ZM10.92 14.63C10.87 14.75 10.8 14.86 10.71 14.96C10.52 15.15 10.27 15.25 10 15.25C9.87 15.25 9.74 15.22 9.62 15.17C9.49 15.12 9.39 15.05 9.29 14.96C9.2 14.86 9.13 14.75 9.07 14.63C9.02 14.51 9 14.38 9 14.25C9 13.99 9.1 13.73 9.29 13.54C9.39 13.45 9.49 13.38 9.62 13.33C9.99 13.17 10.43 13.26 10.71 13.54C10.8 13.64 10.87 13.74 10.92 13.87C10.97 13.99 11 14.12 11 14.25C11 14.38 10.97 14.51 10.92 14.63Z"})});let me=new Map;typeof FinalizationRegistry<"u"&&new FinalizationRegistry(r=>{me.delete(r)});function ba(r,o){if(r===o)return r;let i=me.get(r);if(i)return i.forEach(l=>l.current=o),o;let c=me.get(o);return c?(c.forEach(l=>l.current=r),r):o}function Ca(...r){return(...o)=>{for(let i of r)typeof i=="function"&&i(...o)}}function va(...r){let o={...r[0]};for(let i=1;i<r.length;i++){let c=r[i];for(let l in c){let u=o[l],f=c[l];typeof u=="function"&&typeof f=="function"&&l[0]==="o"&&l[1]==="n"&&l.charCodeAt(2)>=65&&l.charCodeAt(2)<=90?o[l]=Ca(u,f):(l==="className"||l==="UNSAFE_className")&&typeof u=="string"&&typeof f=="string"?o[l]=Ve(u,f):l==="id"&&u&&f?o.id=ba(u,f):o[l]=f!==void 0?f:u}}return o}function ja(r){const[o,i]=Be(r,Se.variantKeys),{as:c,title:l,children:u,description:f,onClose:k,isClosable:g,ref:C,icon:A,startContent:q,endContent:V,isVisible:w,isDefaultVisible:_,onVisibleChange:S,closeButtonProps:$={size:"sm"},className:v,classNames:s,...E}=o,[D,m]=ze(w,_??!0,S),h=typeof(c||"div")=="string",B=Fe(C),z=t.useCallback(()=>{m(!1),k==null||k()},[m,k]),Y=$e(s==null?void 0:s.base,v),x=t.useMemo(()=>Se({hasContent:!te(f)||!te(u),...i}),[f,De(i)]),N=t.useCallback(()=>({"data-visible":ce(D),"data-closeable":ce(g),"data-has-title":ce(!te(l)),"data-has-description":ce(!te(f)),...va(pe(E,{enabled:h}),pe(o)),className:x.base({class:Y})}),[x,Y]),Q=t.useCallback(()=>({className:x.mainWrapper({class:s==null?void 0:s.mainWrapper})}),[x,s==null?void 0:s.mainWrapper]),H=t.useCallback(()=>({className:x.description({class:s==null?void 0:s.description})}),[x,s==null?void 0:s.description]),ee=t.useCallback(()=>({className:x.title({class:s==null?void 0:s.title})}),[x,s==null?void 0:s.title]),O=t.useCallback(()=>({...$,className:x.closeButton({class:s==null?void 0:s.closeButton})}),[x,s==null?void 0:s.closeButton]),p=t.useCallback(()=>({className:x.alertIcon({class:s==null?void 0:s.alertIcon})}),[x,s==null?void 0:s.alertIcon]),ae=t.useCallback(()=>({className:x.iconWrapper({class:s==null?void 0:s.iconWrapper})}),[x,s==null?void 0:s.iconWrapper]);return{title:l,icon:A,children:u,description:f,isClosable:g,domRef:B,endContent:V,startContent:q,getBaseProps:N,getMainWrapperProps:Q,getDescriptionProps:H,getTitleProps:ee,color:i.color,getCloseButtonProps:O,handleClose:z,isVisible:D,onClose:k,getAlertIconProps:p,getIconWrapperProps:ae}}var ke={primary:Ie,secondary:Ie,success:ga,warning:xa,danger:ha},Ae=Te((r,o)=>{const{title:i,icon:c,children:l,description:u,endContent:f,startContent:k,isClosable:g,domRef:C,handleClose:A,getBaseProps:q,getMainWrapperProps:V,getDescriptionProps:w,getTitleProps:_,getCloseButtonProps:S,color:$,isVisible:v,onClose:s,getAlertIconProps:E,getIconWrapperProps:D}=ja({...r,ref:o});if(!v)return null;const m=c&&t.isValidElement(c)?t.cloneElement(c,E()):null,X=ke[$]||ke.primary;return e.jsxs("div",{ref:C,role:"alert",...q(),children:[k,e.jsx("div",{...D(),children:m||e.jsx(X,{...E()})}),e.jsxs("div",{...V(),children:[!te(i)&&e.jsx("div",{..._(),children:i}),!te(u)&&e.jsx("div",{...w(),children:u}),l]}),f,(g||s)&&e.jsx(U,{isIconOnly:!0,"aria-label":"Close",radius:"full",variant:"light",onPress:A,...S(),children:e.jsx(Oe,{height:20,width:20})})]})});Ae.displayName="HeroUI.Alert";var ya=Ae;const wa=({setSelectedCategory:r})=>{const{category:o,error:i}=fa(),c=l=>{o==null||o.map(u=>u.id===l.target.value&&r(u.name))};return e.jsxs(e.Fragment,{children:[e.jsx(Ee,{name:"selected",isRequired:!0,className:"max-w-xs",labelPlacement:"outside",label:"Categoría:",placeholder:"Selecciona una categoría",onChange:c,children:o&&o.map(l=>e.jsx(Me,{children:l.name},l.id))}),i&&i.map(l=>d.error(l))]})},Na=({ratingValue:r,setRatingValue:o})=>e.jsxs("div",{className:"w-full ",children:[e.jsx("h2",{className:"mt-0 pt-0",children:"Rating:"}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("div",{className:"flex text-yellow-500",children:[...Array(5)].map((i,c)=>e.jsx("svg",{onClick:()=>{o(c+1)},className:`size-7 fill-current hover:text-yellow-400 ${r>c?"text-yellow-500":"text-gray-300"}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 15l-5.878 3.09 1.122-6.545L.368 6.91l6.564-.955L10 0l3.068 5.955 6.564.955-4.878 4.635 1.122 6.545z"})},c))}),e.jsxs("span",{className:"text-gray-600 text-md ml-2",children:[r," de 5"]})]})]}),Pa=({description:r,isOpen:o,id:i,onClose:c,inventoryCount:l,price:u,name:f,rating:k,category:g,setProducts:C,imagen:A,battery:q,ram:V,storage:w,mpxCameraFront:_,mpxCameraBack:S,investments:$})=>{const[v,s]=t.useState(k||0),[E,D]=t.useState(null),[m,X]=t.useState([]),[h,B]=t.useState(""),[z,Y]=t.useState(""),[x,N]=t.useState(null),[Q,H]=t.useState(null),ee=t.useRef(null);t.useEffect(()=>{ma().then(b=>{X(b.data.data)})},[]),t.useEffect(()=>(i?(s(k||0),A&&N(A)):N(null),()=>{s(0),A&&N(A)}),[i,A,k]);const[O,p]=t.useState(!1),ae=b=>{Y(b.target.value)},le=b=>["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(b.type)?b.size>15728640?"El archivo es demasiado grande. Máximo 15MB permitido.":null:"Tipo de archivo no permitido. Solo se permiten imágenes JPEG, PNG, GIF y WebP.",ne=t.useCallback(b=>{const a=le(b);if(a){H(a);return}H(null),D(b);const n=new FileReader;n.onload=j=>{var P;N((P=j.target)==null?void 0:P.result)},n.readAsDataURL(b)},[]),oe=b=>{var n;const a=(n=b.target.files)==null?void 0:n[0];a&&ne(a)},ue=b=>{b.preventDefault(),p(!0);const a=Object.fromEntries(new FormData(b.currentTarget)),n=a.selected,j=a.name,P=parseInt(a.price),I=a.description,M=parseInt(a.inventoryCount),T=v,W=E,Z=parseInt(a.inversion);if(!j){d.error("El nombre del producto es requerido."),p(!1);return}if(!n){d.error("La categoría del producto es requerida."),p(!1);return}if(!P){d.error("El precio del producto es requerido."),p(!1);return}if(!I){d.error("La descripción del producto es requerida."),p(!1);return}if(!M){d.error("La cantidad de inventario del producto es requerida."),p(!1);return}if(!W){d.error("La URL de la imagen del producto es requerida."),p(!1);return}if(!z){d.error("La sede del producto es requerida."),p(!1);return}if(!Z){d.error("La inversion del producto es requerida."),p(!1);return}if(h==="Smartphones"||h==="Telefonos"){const R=parseInt(a.storage),L=parseInt(a.ram),G=parseInt(a.back),re=parseInt(a.front),se=parseInt(a.bateria);if(!R){d.error("El storage del producto es requerido."),p(!1);return}if(!L){d.error("La ram del producto es requerida."),p(!1);return}if(!G){d.error("Los mpx traseros del producto son requeridos."),p(!1);return}if(!re){d.error("Los mpx frontales del producto son requeridos."),p(!1);return}if(!se){d.error("La bateria del producto es requerida."),p(!1);return}if(f&&i&&g){let K=n;n===""&&(K=g.id),xe(i,{categoryId:K,name:j,price:P,description:I,inventoryCount:M,rating:T,imagen:W,ram:L,investments:Z,storage:R,mpxCameraBack:G,mpxCameraFront:re,battery:se,sedeId:z}).then(J=>{d.success("Producto actualizado con exito."),C(ie=>{const We=ie==null?void 0:ie.filter(Le=>Le.id!==i);return J.data.data.rating=v,ie?[J.data.data,...We||[]]:null})}).catch(J=>{console.log(J),d.error("Error al crear el producto.")}).finally(()=>{p(!1),c()})}f||(console.log("Creando telefono"),console.log("Creando telefono"),ge({categoryId:n,name:j,price:P,description:I,inventoryCount:M,rating:T,imagen:W,investments:Z,ram:L,storage:R,mpxCameraBack:G,mpxCameraFront:re,battery:se,sedeId:z}).then(K=>{d.success("Producto creado con exito."),C(J=>(K.data.data.rating=v,J?[K.data.data,...J]:null))}).catch(K=>{console.log(K),d.error("Error al crear el producto.")}).finally(()=>{p(!1),c()}))}else{if(f&&i&&g){let R=n;n===""&&(R=g.id),xe(i,{categoryId:R,name:j,price:P,description:I,inventoryCount:M,investments:Z,rating:T,imagen:W,sedeId:z}).then(L=>{d.success("Producto actualizado con exito."),C(G=>{const re=G==null?void 0:G.filter(se=>se.id!==i);return L.data.data.rating=v,G?[L.data.data,...re||[]]:null})}).catch(L=>{console.log(L),d.error("Error al crear el producto.")}).finally(()=>{p(!1),c()})}f||ge({categoryId:n,name:j,price:P,description:I,inventoryCount:M,investments:Z,rating:T,imagen:W,sedeId:z}).then(R=>{d.success("Producto creado con exito."),C(L=>(R.data.data.rating=v,L?[R.data.data,...L]:null))}).catch(R=>{console.log(R),d.error("Error al crear el producto.")}).finally(()=>{p(!1),c()})}};return e.jsx(Ze,{isOpen:o,size:"5xl",onClose:c,children:e.jsx(Ge,{children:b=>e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"flex flex-col gap-1",children:e.jsx("h1",{className:"text-2xl",children:"Agregar Porducto"})}),e.jsx(He,{children:e.jsxs(Ke,{onSubmit:ue,children:[e.jsxs(Je,{hideScrollBar:!0,className:" flex gap-8 w-full flex-col lg:flex-row h-96 lg:h-auto",children:[e.jsxs("div",{className:"flex flex-col items-center w-full gap-4",children:[e.jsxs("div",{className:"p-6",children:[!E&&!x?e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-all duration-200  border-gray-300 hover:border-gray-400 ",children:[e.jsx(Xe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Haz clic para seleccionar"}),e.jsx("button",{onClick:()=>{var a;return(a=ee.current)==null?void 0:a.click()},type:"button",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:"Seleccionar archivo"}),e.jsx("input",{ref:ee,type:"file",accept:"image/*",onChange:oe,className:"hidden"}),e.jsx("p",{className:"text-xs text-gray-400 mt-3",children:"JPEG, PNG, GIF, WebP (máx. 15MB)"})]}):e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:x||"",alt:"Preview",className:"w-full h-64 object-cover rounded-lg border border-gray-200"}),!O&&e.jsx("button",{onClick:()=>{D(null),N(null),H(null)},className:"absolute top-2 right-2 p-1 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors duration-200",children:e.jsx(Ye,{className:"w-4 h-4"})})]})}),Q&&e.jsxs("div",{className:"mt-4 flex items-center p-3 bg-red-50 text-red-800 rounded-lg",children:[e.jsx(ya,{className:"w-5 h-5 mr-2 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:Q})]})]}),e.jsx(pa,{label:"Descripción:",name:"description",isRequired:!0,defaultValue:r,labelPlacement:"outside",placeholder:"Introduce la descripción del Producto."})]}),e.jsxs("div",{className:"flex flex-col gap-6 w-full justify-center",children:[e.jsxs("div",{className:"flex gap-8 justify-between flex-col lg:flex-row",children:[e.jsx(F,{name:"name",label:"Nombre:",defaultValue:f,labelPlacement:"outside",isRequired:!0,placeholder:"Introduce el nombre del Producto.",type:"text"}),h==="Smartphones"||h==="Telefonos"&&e.jsx(F,{name:"bateria",label:"Bateria:",labelPlacement:"outside",defaultValue:q==null?void 0:q.toString(),isRequired:!0,placeholder:"Introduce la bateria del Producto.",type:"text"})]}),e.jsxs("div",{className:"flex gap-8 justify-between flex-col lg:flex-row",children:[e.jsx(wa,{setSelectedCategory:B}),e.jsx(Ee,{isRequired:!0,className:"w-full",label:"Sede",name:"sede",placeholder:"Seleccione la Sede",labelPlacement:"outside",onChange:ae,children:m.map(a=>e.jsx(Me,{children:a.direction},a.id))})]}),h==="Smartphones"||h==="Telefonos"&&e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex gap-8",children:[e.jsx(F,{name:"ram",label:"RAM:",defaultValue:V==null?void 0:V.toString(),labelPlacement:"outside",isRequired:!0,placeholder:"Introduce la RAM del Producto.",type:"text"}),e.jsx(F,{name:"storage",label:"Storage:",defaultValue:w==null?void 0:w.toString(),labelPlacement:"outside",isRequired:!0,placeholder:"Introduce el almacenamiento del Producto.",type:"text"})]}),e.jsxs("div",{className:"flex gap-8",children:[e.jsx(F,{name:"front",label:"MPX Frontal:",defaultValue:_==null?void 0:_.toString(),labelPlacement:"outside",isRequired:!0,placeholder:"Introduce los mpx frontal del Producto.",type:"text"}),e.jsx(F,{name:"back",label:"MPX Trasera:",defaultValue:S==null?void 0:S.toString(),labelPlacement:"outside",isRequired:!0,placeholder:"Introduce los mpx traseros del Producto.",type:"text"})]})]}),e.jsxs("div",{className:"flex gap-8 flex-col lg:flex-row",children:[e.jsx(Na,{ratingValue:v,setRatingValue:s}),e.jsx(F,{label:"Inversion",name:"inversion",isRequired:!0,labelPlacement:"outside",defaultValue:$==null?void 0:$.toString(),placeholder:"0.00",startContent:e.jsx("div",{className:"pointer-events-none flex items-center",children:e.jsx("span",{className:"text-default-400 text-small",children:"$"})}),type:"number"})]}),e.jsxs("div",{className:"flex justify-between w-full gap-8 flex-col lg:flex-row",children:[e.jsx(F,{label:"Precio",name:"price",isRequired:!0,defaultValue:u==null?void 0:u.toString(),labelPlacement:"outside",placeholder:"0.00",startContent:e.jsx("div",{className:"pointer-events-none flex items-center",children:e.jsx("span",{className:"text-default-400 text-small",children:"$"})}),type:"number"}),e.jsx(F,{label:"Cantidad",required:!0,isRequired:!0,name:"inventoryCount",defaultValue:l==null?void 0:l.toString(),labelPlacement:"outside",placeholder:"Introduce la cantidad",type:"number"})]})]})]}),e.jsxs("div",{className:"flex justify-end p-5 w-full gap-8",children:[e.jsx(U,{color:"danger",variant:"light",onPress:()=>{b(),s(0)},children:"Cerrar"}),e.jsxs(U,{color:"primary",type:"submit",disabled:O,children:[O&&e.jsx(Re,{color:"default"}),!O&&"Guardar"]})]})]})})]})})})};function _e(r){return r?r.charAt(0).toUpperCase()+r.slice(1).toLowerCase():""}const fe=[{name:"NOMBRE",uid:"name",sortable:!0},{name:"SEDE",uid:"sede",sorteable:!0},{name:"CATEGORIA",uid:"category",sortable:!0},{name:"PRECIO",uid:"price",sortable:!0},{name:"INVERSION",uid:"invertments"},{name:"EN STOCK",uid:"quantity",sortable:!0},{name:"CANTIDAD INICIAL",uid:"inicial_quantity",sortable:!0},{name:"RATING",uid:"ratingAverage",sortable:!0},{name:"FECHA DE CREACIÓN",uid:"createdAt",sortable:!0},{name:"ACCIONES",uid:"actions"}],Sa=["name","price","invertments","category","quantity","inicial_quantity","actions","createdAt","ratingAverage"];function Wa(){const{isOpen:r,onOpen:o,onClose:i}=Qe(),{user:c}=ea(),[l,u]=t.useState(null),f=()=>{u(null),o()},k=a=>{u(a),o()},{category:g,products:C,loading:A,error:q,setProducts:V}=aa(),[w,_]=t.useState(""),[S,$]=t.useState(new Set(Sa)),[v,s]=t.useState("all"),[E,D]=t.useState(10),[m,X]=t.useState(),[h,B]=t.useState(1),z=!!w,Y=t.useMemo(()=>S==="all"?fe:fe.filter(a=>Array.from(S).includes(a.uid)),[S]),x=t.useMemo(()=>{if(!C)return[];let a=[...C];return z&&(a=a.filter(n=>n.name.toLowerCase().includes(w.toLowerCase())||n.category.name.toLowerCase().includes(w.toLowerCase()))),v!=="all"&&Array.from(v).length!==(g==null?void 0:g.length)&&(console.log(v),a=a.filter(n=>Array.from(v).includes(n.category.id))),a},[C,z,v,g==null?void 0:g.length,w]),N=Math.ceil(x.length/E),Q=t.useMemo(()=>{const a=[...x].sort((P,I)=>{const M=P[m==null?void 0:m.column],T=I[m==null?void 0:m.column],W=M<T?-1:M>T?1:0;return(m==null?void 0:m.direction)==="descending"?-W:W}),n=(h-1)*E,j=n+E;return a.slice(n,j)},[x,h,E,m==null?void 0:m.column,m==null?void 0:m.direction]),H=a=>{const n=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],j=new Date(a),P=j.getUTCDate(),I=n[j.getUTCMonth()],M=j.getUTCFullYear();return`${P} ${I} ${M}`},ee=a=>{ta(a).then(()=>{d.success("Producto eliminado con exito"),V(n=>n?n.filter(j=>j.id!==a):null)}).catch(n=>{console.log(n),d.error("Error al eliminar el producto")})},O=t.useCallback((a,n)=>{const j=a[n];switch(n){case"name":return e.jsx(Pe,{avatarProps:{radius:"lg",src:a.imagen},description:e.jsx("span",{style:{display:"inline-block",maxWidth:"100px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:a.description}),name:e.jsx("span",{style:{display:"inline-block",maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:String(j)})});case"sede":return e.jsx(Pe,{avatarProps:{radius:"lg",src:a.Sede.image},description:e.jsx("span",{style:{display:"inline-block",maxWidth:"70px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:a.Sede.phone}),name:e.jsx("span",{style:{display:"inline-block",maxWidth:"100px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:a.Sede.direction})});case"category":return e.jsx("div",{className:"flex flex-col",children:e.jsx("p",{className:"text-bold text-small capitalize",children:a.category.name})});case"createdAt":{const M=(T=>{const W=new Date(T),Z=new Date;return(Z.getFullYear()-W.getFullYear())*12+(Z.getMonth()-W.getMonth())})(a.createdAt)>3?"text-red-500":"text-green-700";return e.jsx("div",{className:"flex justify-center",children:e.jsx("p",{className:`text-bold text-small capitalize  ${M}`,children:H(a.createdAt)})})}case"price":return e.jsx("div",{className:"flex flex-col ml-2",children:e.jsxs("p",{className:"text-bold text-small capitalize",children:["$",a.price]})});case"invertments":return e.jsx("div",{className:"flex flex-col ml-2",children:e.jsxs("p",{className:"text-bold text-small capitalize",children:["$",a.investments]})});case"ratingAverage":return e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex text-yellow-500",children:[...Array(5)].map((P,I)=>e.jsx("svg",{className:`h-5 w-5 fill-current ${a.rating-.5>I?"text-yellow-500":"text-gray-300"}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 15l-5.878 3.09 1.122-6.545L.368 6.91l6.564-.955L10 0l3.068 5.955 6.564.955-4.878 4.635 1.122 6.545z"})},I))}),e.jsxs("span",{className:"text-gray-600 ml-2",children:[a.rating," de 5"]})]})});case"quantity":return e.jsx(Ne,{className:"capitalize",size:"sm",variant:"dot",color:a.inventoryCount<=3?"danger":"success",children:String(a.inventoryCount)});case"inicial_quantity":return e.jsx(Ne,{className:"capitalize",size:"sm",variant:"dot",color:a.inicialInventory<=3?"danger":"success",children:String(a.inicialInventory)});case"actions":return(c==null?void 0:c.role)==="OWNER"?e.jsxs("div",{className:"relative flex justify-center items-center gap-2",children:[e.jsx(de,{content:"Edit product",color:"success",children:e.jsx("button",{onClick:()=>k(a),className:"text-lg text-success cursor-pointer active:opacity-50",children:e.jsx(he,{})})}),e.jsx(de,{color:"danger",content:"Delete product",children:e.jsx("button",{onClick:()=>{ee(a.id)},className:"text-lg text-danger cursor-pointer active:opacity-50",children:e.jsx(be,{})})})]}):e.jsxs("div",{className:"relative flex justify-center items-center gap-2",children:[e.jsx(de,{content:"Edit product",color:"success",children:e.jsx("button",{onClick:()=>d.error("Solo disponible para el Administrador"),className:"text-lg text-success cursor-pointer active:opacity-50",children:e.jsx(he,{})})}),e.jsx(de,{color:"danger",content:"Delete product",children:e.jsx("button",{onClick:()=>{d.error("Solo disponible para el Administrador")},className:"text-lg text-danger cursor-pointer active:opacity-50",children:e.jsx(be,{})})})]});default:return String(j)}},[]),p=t.useCallback(()=>{h<N&&B(h+1)},[h,N]),ae=t.useCallback(()=>{h>1&&B(h-1)},[h]),le=t.useCallback(a=>{D(Number(a.target.value)),B(1)},[]),ne=t.useCallback(a=>{a?(_(a),B(1)):_("")},[]),oe=t.useCallback(()=>{_(""),B(1)},[]),ue=t.useMemo(()=>e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 items-end ",children:[e.jsx(F,{isClearable:!0,color:"primary",className:"w-full sm:max-w-[44%]",placeholder:"Búsqueda... ",startContent:e.jsx(ra,{}),value:w,onClear:()=>oe(),onValueChange:ne}),e.jsxs("div",{className:"flex gap-3 w-full justify-center sm:w-auto ",children:[e.jsxs(Ce,{children:[e.jsx(ve,{children:e.jsx(U,{endContent:e.jsx(je,{className:"text-small"}),variant:"flat",children:"Categoría"})}),e.jsx(ye,{className:"max-h-96 overflow-y-auto",disallowEmptySelection:!0,"aria-label":"Table Columns",closeOnSelect:!1,selectedKeys:v,selectionMode:"multiple",onSelectionChange:s,children:g&&g.map(a=>e.jsx(we,{className:"capitalize",children:_e(a.name)},a.id))})]}),e.jsxs(Ce,{children:[e.jsx(ve,{children:e.jsx(U,{endContent:e.jsx(je,{className:"text-small"}),variant:"flat",children:"Columnas"})}),e.jsx(ye,{disallowEmptySelection:!0,"aria-label":"Table Columns",closeOnSelect:!1,selectedKeys:S,selectionMode:"multiple",onSelectionChange:$,children:fe.map(a=>e.jsx(we,{className:"capitalize",children:_e(a.name)},a.uid))})]}),(c==null?void 0:c.role)==="OWNER"&&e.jsx(U,{color:"primary",onPress:f,endContent:e.jsx(sa,{}),children:"Nuevo Producto"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-default-400 text-small",children:["Total ",C==null?void 0:C.length," productos"]}),e.jsxs("label",{className:"flex items-center text-default-400 text-small",children:["Filas por páginas:",e.jsxs("select",{className:"bg-transparent outline-none text-default-400 text-small",onChange:le,children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"15",children:"15"}),e.jsx("option",{value:"20",children:"20"})]})]})]})]}),[w,ne,v,g,S,C==null?void 0:C.length,le,oe]),b=t.useMemo(()=>e.jsxs("div",{className:"py-2 px-2 flex justify-between items-center",children:[e.jsx(la,{isCompact:!0,showControls:!0,showShadow:!0,color:"primary",page:h,total:N,onChange:B}),e.jsxs("div",{className:" justify-end gap-2",children:[e.jsx(U,{isDisabled:N===1,size:"md",variant:"flat",onPress:ae,color:"danger",className:"mx-2",children:"Anterior"}),e.jsx(U,{isDisabled:N===1,size:"md",variant:"flat",onPress:p,color:"success",children:"Siguiente"})]})]}),[h,N,ae,p]);return e.jsxs(e.Fragment,{children:[q&&q.map(a=>d.error(a)),e.jsxs(na,{isHeaderSticky:!0,"aria-label":"Example table with custom cells, pagination and sorting",bottomContent:b,bottomContentPlacement:"outside",classNames:{wrapper:"max-h-[600px]"},sortDescriptor:m,topContent:ue,topContentPlacement:"outside",onSortChange:X,children:[e.jsx(oa,{columns:Y,children:a=>e.jsx(ia,{align:a.uid==="actions"||a.uid==="ratingAverage"||a.uid==="createdAt"?"center":"start",allowsSorting:a.sortable,children:a.name},a.uid)}),e.jsx(ca,{isLoading:A,loadingContent:e.jsx(Re,{color:"success"}),emptyContent:"No products found",items:Q,children:a=>e.jsx(da,{children:n=>e.jsx(ua,{children:O(a,n)})},a.id)})]}),e.jsx(Pa,{isOpen:r,onClose:i,setProducts:V,...l})]})}export{_e as Capitalize,Wa as default};
