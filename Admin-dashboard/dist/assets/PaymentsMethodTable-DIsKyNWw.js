import{S as K,I as Q,r as t,j as e,t as k,i as W,b,a as X,s as Z,T as ee}from"./index-CoKN0y7C.js";import{E as se,D as te,S as ae,d as le,a as ne,C as re,b as oe,m as ce,P as ie,p as de,t as ue,c as me,e as xe,f as fe,g as he,h as be}from"./Icons-Ir8WEg-7.js";import{c as je}from"./chunk-J7I6W5JF-YZ2tu-UP.js";import{u as ge}from"./chunk-R6AK6OQ4-D6HQW98L.js";function pe(c){return c?c.charAt(0).toUpperCase()+c.slice(1).toLowerCase():""}const N=[{name:"TARJETA",uid:"card",sortable:!0},{name:"NÚMERO",uid:"number",sortable:!0},{name:"MOVIL A CONFIRMAR",uid:"movil",sortable:!0},{name:"CANTIDAD DE PAGOS",uid:"payment",sortable:!0},{name:"FECHA",uid:"createdAt",sortable:!0},{name:"ACTIONS",uid:"actions"}],Ce=["card","number","movil","payment","createdAt","actions"];function _e(){const{error:c,loading:z,paymentMethod:o,addPaymentMethod:L,updatePaymentMethod:F,deletePaymentMethod:w}=K(),{isOpen:R,onOpen:x,onClose:V}=Q(),[i,j]=t.useState(""),[m,M]=t.useState(new Set(Ce)),[f,D]=t.useState(10),[a,U]=t.useState(),[n,d]=t.useState(1),v=!!i,[B,P]=t.useState(null),$=t.useMemo(()=>m==="all"?N:N.filter(s=>Array.from(m).includes(s.uid)),[m]),g=t.useMemo(()=>{if(!o)return[];let s=[...o];return v&&(s=s.filter(l=>{var r;return l.paymentOptions.toLowerCase().includes(i.toLowerCase())||((r=l.cardNumber)==null?void 0:r.toString().toLowerCase().includes(i.toLowerCase()))})),s},[o,v,i]),u=Math.ceil(g.length/f),H=t.useMemo(()=>{const s=[...g].sort((p,C)=>{const h=p[a==null?void 0:a.column],O=C[a==null?void 0:a.column],T=h<O?-1:h>O?1:0;return(a==null?void 0:a.direction)==="descending"?-T:T}),l=(n-1)*f,r=l+f;return s.slice(l,r)},[g,n,f,a==null?void 0:a.column,a==null?void 0:a.direction]),q=s=>{const l=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],r=new Date(s),p=r.getUTCDate(),C=l[r.getUTCMonth()],h=r.getUTCFullYear();return`${p} ${C} ${h}`},_=t.useCallback(s=>()=>{w(s)},[w]),G=t.useCallback((s,l)=>{const r=s[l];switch(l){case"card":return e.jsx(ge,{avatarProps:{radius:"lg",src:s.cardImage},description:s.id,name:s.paymentOptions});case"number":return e.jsx("div",{className:"flex flex-col",children:e.jsx("p",{className:"text-bold text-small capitalize",children:s.cardNumber})});case"movil":return e.jsx("div",{className:"flex flex-col",children:e.jsx("p",{className:"text-bold text-small capitalize",children:s.phoneNumber})});case"payment":return e.jsx("div",{className:"flex justify-center",children:e.jsx(je,{className:"capitalize",color:"success",size:"sm",variant:"flat",children:s._count.payment})});case"createdAt":return e.jsx("div",{children:e.jsx("p",{className:"text-bold text-small capitalize",children:q(s.createdAt)})});case"actions":return e.jsxs("div",{className:"relative flex justify-center items-center gap-2",children:[e.jsx(k,{content:"Edit Payment Method",color:"warning",children:e.jsx("button",{onClick:()=>{s.cardNumber&&(x(),P({image:s.cardImage,numberCard:s.cardNumber,phoneNumber:s.phoneNumber,selected:s.paymentOptions,id:s.id}))},className:"text-lg text-warning cursor-pointer active:opacity-50",children:e.jsx(se,{})})}),e.jsx(k,{color:"danger",content:"Delete Payment Method",children:e.jsx("button",{className:"text-lg text-danger cursor-pointer active:opacity-50",onClick:_(s.id),children:e.jsx(te,{})})})]});default:return String(r)}},[_,x]),S=t.useCallback(()=>{n<u&&d(n+1)},[n,u]),I=t.useCallback(()=>{n>1&&d(n-1)},[n]),A=t.useCallback(s=>{D(Number(s.target.value)),d(1)},[]),y=t.useCallback(s=>{s?(j(s),d(1)):j("")},[]),E=t.useCallback(()=>{j(""),d(1)},[]),J=t.useMemo(()=>e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 items-end",children:[e.jsx(W,{isClearable:!0,color:"success",className:"w-full sm:max-w-[44%]",placeholder:"Búsqueda...",startContent:e.jsx(ae,{}),value:i,onClear:()=>E(),onValueChange:y}),e.jsxs("div",{className:"flex gap-3 w-full justify-center sm:w-auto",children:[e.jsxs(le,{children:[e.jsx(ne,{children:e.jsx(b,{endContent:e.jsx(re,{className:"text-small"}),variant:"flat",children:"Columnas"})}),e.jsx(oe,{disallowEmptySelection:!0,"aria-label":"Table Columns",closeOnSelect:!1,selectedKeys:m,selectionMode:"multiple",onSelectionChange:M,children:N.map(s=>e.jsx(ce,{className:"capitalize",children:pe(s.name)},s.uid))})]}),e.jsx(b,{color:"success",endContent:e.jsx(ie,{}),onPress:()=>{x(),P(null)},children:"Nuevo metodo de pago"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-default-400 text-small",children:["Total ",o==null?void 0:o.length," pagos"]}),e.jsxs("label",{className:"flex items-center text-default-400 text-small",children:["Filas por páginas:",e.jsxs("select",{className:"bg-transparent outline-none text-default-400 text-small",onChange:A,children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"15",children:"15"}),e.jsx("option",{value:"20",children:"20"})]})]})]})]}),[i,y,m,x,o==null?void 0:o.length,A,E]),Y=t.useMemo(()=>e.jsxs("div",{className:"py-2 px-2 flex justify-between items-center",children:[e.jsx(de,{isCompact:!0,showControls:!0,showShadow:!0,color:"success",page:n,total:u,onChange:d}),e.jsxs("div",{className:" justify-end gap-2",children:[e.jsx(b,{isDisabled:u===1,size:"md",variant:"flat",onPress:I,color:"danger",className:"mx-2",children:"Anterior"}),e.jsx(b,{isDisabled:u===1,size:"md",variant:"flat",onPress:S,color:"success",children:"Siguiente"})]})]}),[n,u,I,S]);return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("h1",{className:"text-4xl font-medium text-left",children:"Metodos de Pago"}),c&&c.map(s=>X.error(s)),e.jsxs(ue,{isHeaderSticky:!0,"aria-label":"Example table with custom cells, pagination and sorting",bottomContent:Y,bottomContentPlacement:"outside",classNames:{wrapper:"max-h-[600px]"},sortDescriptor:a,topContent:J,topContentPlacement:"outside",onSortChange:U,children:[e.jsx(me,{columns:$,children:s=>e.jsx(xe,{align:s.uid==="actions"||s.uid==="payment"?"center":"start",allowsSorting:s.sortable,children:s.name},s.uid)}),e.jsx(fe,{isLoading:z,loadingContent:e.jsx(Z,{color:"white"}),emptyContent:"No users found",items:H,children:s=>e.jsx(he,{children:l=>e.jsx(be,{children:G(s,l)})},s.id)})]}),e.jsx(ee,{isOpen:R,onClose:V,updatePaymentMethod:F,addPaymentMethod:L,...B})]})}export{pe as Capitalize,_e as default};
